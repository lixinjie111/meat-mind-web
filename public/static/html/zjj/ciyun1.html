<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <style type="text/css">
        * {
            font-family: 'Helvetica Neue','Helvetica','PingFang SC','Hiragino Sans GB','Microsoft YaHei','微软雅黑','Arial','sans-serif','PingFangSC-Medium';
            margin: 0;
            padding: 0;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #div {
            width: 43%;
            height: 98%;
        }
    </style>
</head>

<body>
    <div id="div"></div>
    <script src="../../js/echarts.min.js"></script>
    <script src="../../js/wordCloud.js"></script>
    <script lang="javascript">
         setTimeout(function () {
            var myPieChart = echarts.init(document.getElementById("div"));
            var maskImage = new Image();
            var img = 'https://sophia-portal-files.yzsmart.top/static/images/dnao.png';
            function getBase64Image(img) {
                var canvas = document.createElement("canvas");
                canvas.width = img.width;
                canvas.height = img.height;
                var ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0, img.width, img.height);
                var ext = img.src.substring(img.src.lastIndexOf(".") + 1).toLowerCase();
                var dataURL = canvas.toDataURL("image/" + ext);
                return dataURL;
            }
            var image = new Image();
            image.src = img;
            image.setAttribute('crossOrigin', 'anonymous');
            image.onload = function () {
                var base64 = getBase64Image(image);
                var maskImage = new Image();
                maskImage.onload = function() {
                    myPieChart.setOption({
                        tooltip: {
                            show: true
                        },
                        grid: {
                            left: 0,
                            bottom: 0,
                            top: 0,
                            right: 0,
                        },
                        xAxis: {
                            type: "category",
                            show: false
                        },
                        yAxis: {
                            max: 100,
                            show: false
                        },
                        series: [{
                                zlevel: -1,
                                type: 'pictorialBar',
                                name: 'pictorial',
                                silent: true,
                                symbol: 'image://' + base64,
                                symbolSize: ['100%', '100%'],
                                symbolPosition: 'center',
                                barWidth: '100%',
                                barMaxWidth: '100%',
                                itemStyle: {
                                    normal: {
                                        opacity: 0.9
                                    }
                                },
                                data: [{
                                    value: 100
                                }]
                            },
                            {
                                type: 'wordCloud',
                                sizeRange: [9, 20],
                                rotationRange: [-30, 30],
                                maskImage: maskImage,
                                textPadding: 0,
                                gridSize: 11,
                                width: '100%',
                                height: '100%',
                                left: 'center',
                                top: 'center',
                                drawOutOfBound: false,
                                textStyle: {
                                    normal: {
                                        color: function () {
                                            var colorList = ['#73DDFF', '#73ACFF', '#FDD56A', '#FDB36A', '#FD866A', '#9E87FF', '#58D5FF'];
                                            return colorList[Math.round(Math.random() * 7)];
                                        }
                                    },
                                    emphasis: {
                                        shadowBlur: 10,
                                        shadowColor: '#333'
                                    }
                                },
                                data: [
                                    {
                                        name: " 加班",
                                        value: 24
                                    },
                                    {
                                        name: " 抖音",
                                        value: 18
                                    },
                                    {
                                        name: " 堵车",
                                        value: 17
                                    },
                                    {
                                        name: " 吃播",
                                        value: 12
                                    },
                                    {
                                        name: " 历史",
                                        value: 12
                                    },
                                    {
                                        name: " 马路杀手",
                                        value: 11
                                    },
                                    {
                                        name: " 工作",
                                        value: 18
                                    },
                                    {
                                        name: " 996",
                                        value: 17
                                    },
                                    {
                                        name: " DISS",
                                        value: 12
                                    },
                                    {
                                        name: " 日了狗了",
                                        value: 12
                                    },
                                    {
                                        name: " 朋友圈",
                                        value: 11
                                    }, {
                                        name: " 葛优躺",
                                        value: 18
                                    },
                                    {
                                        name: " 显卡",
                                        value: 17
                                    },
                                    {
                                        name: " 网红",
                                        value: 12
                                    },
                                    {
                                        name: " 小天才",
                                        value: 12
                                    },
                                    {
                                        name: " 笔记",
                                        value: 11
                                    }, {
                                        name: " 花木兰",
                                        value: 18
                                    },
                                    {
                                        name: " 科技",
                                        value: 17
                                    },
                                    {
                                        name: " 建盏",
                                        value: 12
                                    },
                                    {
                                        name: " 川普",
                                        value: 12
                                    },
                                    {
                                        name: " 国际关系",
                                        value: 11
                                    }, {
                                        name: " 篮球",
                                        value: 18
                                    },
                                    {
                                        name: " 可爱",
                                        value: 17
                                    },
                                    {
                                        name: " 小鲜肉",
                                        value: 12
                                    },
                                    {
                                        name: " 东方美人",
                                        value: 12
                                    },
                                    {
                                        name: " 炒股",
                                        value: 11
                                    }, {
                                        name: " 社交",
                                        value: 18
                                    },
                                    {
                                        name: " 快手",
                                        value: 17
                                    },
                                    {
                                        name: " 微博",
                                        value: 12
                                    },
                                    {
                                        name: " 微信",
                                        value: 12
                                    },
                                    {
                                        name: " 奶茶",
                                        value: 11
                                    }, {
                                        name: " 罚单",
                                        value: 18
                                    },
                                    {
                                        name: " 魔兽",
                                        value: 17
                                    },
                                    {
                                        name: " 王者荣耀",
                                        value: 12
                                    },
                                    {
                                        name: " 吃鸡",
                                        value: 12
                                    }
                                ],
                            },
                        ]
                    });
                };
                maskImage.src = base64;
            }
        },500);
    </script>
</body>

</html>